<div class="container" style="max-width: 480px; padding-top: 20px;">
  <h2 style="font-size: 32px; margin-bottom: 25px;">Send a Message</h2>
  
  <form id="litecorForm" action="https://formspree.io/f/meorknln" method="POST">
    <input type="text" name="name" placeholder="Your Name" required style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.08); padding: 14px; border-radius: 12px; color: #fff; margin-bottom: 15px; outline: none;">
    <input type="email" name="email" placeholder="Your Email" required style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.08); padding: 14px; border-radius: 12px; color: #fff; margin-bottom: 15px; outline: none;">
    <textarea name="message" rows="4" placeholder="Project details..." required style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.08); padding: 14px; border-radius: 12px; color: #fff; margin-bottom: 20px; outline: none; font-family: inherit; resize: none;"></textarea>
    
    <button type="submit" id="submitBtn" class="contact-btn-vibrant" style="width: 100%;">
      <span class="btn-text">Send Message</span>
      <svg class="checkmark" viewBox="0 0 24 24" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); width: 24px; height: 24px; stroke: #021018; stroke-width: 3; fill: none; stroke-linecap: round; stroke-linejoin: round;">
        <path d="M5 13l4 4L19 7"/>
      </svg>
    </button>
  </form>

  <script>
    // Self-executing function to ensure it binds to the form even after SPA swap
    (function() {
      const form = document.getElementById('litecorForm');
      if (!form) return;

      form.onsubmit = async function(e) {
        e.preventDefault(); // THIS LINE PREVENTS THE REDIRECT
        e.stopPropagation();

        const btn = document.getElementById('submitBtn');
        const data = new FormData(form);

        // UI Feedback: Start Animation
        btn.classList.add('success');
        if (window.playSound) window.playSound(1200);

        try {
          const response = await fetch(form.action, {
            method: 'POST',
            body: data,
            headers: { 'Accept': 'application/json' }
          });

          if (response.ok) {
            // Success Logic
            setTimeout(() => {
              // Ensure navigateTo exists in global scope
              if (window.navigateTo) {
                navigateTo('home-content.html', 'index');
              }
              btn.classList.remove('success');
              form.reset();
            }, 2000);
          } else {
            // Server error handling
            const result = await response.json();
            alert(result.errors ? result.errors[0].message : "Error submitting form.");
            btn.classList.remove('success');
          }
        } catch (error) {
          // Connection error handling
          alert("Connection error. Please try again.");
          btn.classList.remove('success');
        }
      };
    })();
  </script>
</div>
